<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divélun Pro - Boxing Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuentes: Oswald para títulos deportivos, Roboto Mono para datos técnicos -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-black': '#09090b',
                        'brand-dark': '#18181b',
                        'brand-accent': '#ff2a2a', /* Rojo Agresivo High-Energy */
                        'brand-active': '#ffffff', /* Blanco para estado activo */
                    },
                    fontFamily: {
                        sans: ['Oswald', 'sans-serif'],
                        mono: ['Roboto Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    
    <style>
        body { background-color: #000; color: white; }
        
        /* Efecto de escaneo en el video (Rojo) */
        .scanline {
            width: 100%;
            height: 2px;
            background: rgba(255, 42, 42, 0.3);
            position: absolute;
            z-index: 10;
            animation: scan 3s linear infinite;
            box-shadow: 0 0 4px rgba(255, 42, 42, 0.5);
        }
        
        @keyframes scan {
            0% { top: 0%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* Animación del visualizador de audio Pro (Rojo) */
        .equalizer-bar {
            transition: height 0.15s ease;
            box-shadow: 0 0 8px rgba(255, 42, 42, 0.4);
        }

        /* Ocultar scrollbar */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen bg-neutral-900 p-0 sm:p-4">

    <!-- App Container -->
    <div class="relative w-full max-w-md bg-brand-black sm:rounded-[30px] overflow-hidden shadow-2xl border-0 sm:border border-neutral-800 h-[100vh] sm:h-auto sm:min-h-[800px] flex flex-col">
        
        <!-- HEADER APP -->
        <div class="flex justify-between items-center p-5 bg-brand-black z-20 border-b border-white/10">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-brand-accent rounded flex items-center justify-center shadow-[0_0_10px_rgba(255,42,42,0.4)]">
                    <span class="text-white font-bold text-lg">D</span>
                </div>
                <h1 class="text-xl tracking-wider font-bold text-white">DIVÉLUN <span class="text-brand-accent font-light">PRO</span></h1>
            </div>
            <div class="flex gap-2">
                <div class="w-2 h-2 rounded-full bg-brand-accent animate-pulse"></div>
                <span class="text-xs font-mono text-brand-accent">ONLINE</span>
            </div>
        </div>

        <!-- AREA DE VIDEO (MAIN STAGE) -->
        <div class="relative w-full aspect-video bg-black flex-shrink-0 border-b border-white/10 group">
            
            <!-- Línea de escaneo decorativa -->
            <div class="scanline"></div>

            <!-- Etiquetas HUD -->
            <div class="absolute top-4 right-4 z-10 flex flex-col items-end gap-1">
                <span class="bg-black/60 backdrop-blur text-brand-accent text-[10px] font-mono px-2 py-1 border border-brand-accent/30 rounded">REC: 1080p</span>
                <span class="bg-brand-accent text-white text-[10px] font-bold px-2 py-1 rounded shadow-[0_0_10px_rgba(255,42,42,0.5)]">LIVE FEED</span>
            </div>

            <!-- VIDEO PLAYER -->
            <video id="exerciseVideo" 
                   class="w-full h-full object-contain" 
                   autoplay loop muted playsinline>
                
                <!-- TU ARCHIVO -->
                <source src="v-x9z2-sh01-div.mp4" type="video/mp4">
                
                <!-- Fallback -->
                <source src="https://assets.mixkit.co/videos/preview/mixkit-boxing-training-in-a-gym-4833-large.mp4" type="video/mp4">
            </video>

            <!-- Overlay Gradiente -->
            <div class="absolute bottom-0 left-0 w-full h-20 bg-gradient-to-t from-brand-black to-transparent"></div>
            
            <!-- Título Técnica -->
            <div class="absolute bottom-4 left-5">
                <h2 class="text-3xl font-bold italic text-white leading-none">JAB <span class="text-brand-accent">CROSS</span></h2>
                <p class="text-xs text-neutral-400 font-mono mt-1">MODULE 01 // FUNDAMENTALS</p>
            </div>
        </div>

        <!-- DASHBOARD & CONTROLES -->
        <div class="flex-1 bg-brand-black p-6 flex flex-col gap-6 relative overflow-y-auto">
            
            <!-- Barra de Estadísticas -->
            <div class="grid grid-cols-3 gap-3">
                <div class="bg-brand-dark p-3 rounded border border-white/5 flex flex-col items-center">
                    <span class="text-[10px] text-neutral-500 font-mono uppercase">Cadencia</span>
                    <span class="text-xl font-mono text-white">120<span class="text-xs text-neutral-500">ppm</span></span>
                </div>
                <div class="bg-brand-dark p-3 rounded border border-white/5 flex flex-col items-center">
                    <span class="text-[10px] text-neutral-500 font-mono uppercase">Fuerza</span>
                    <span class="text-xl font-mono text-brand-accent">88<span class="text-xs text-neutral-500">%</span></span>
                </div>
                <div class="bg-brand-dark p-3 rounded border border-white/5 flex flex-col items-center">
                    <span class="text-[10px] text-neutral-500 font-mono uppercase">Tiempo</span>
                    <span id="sessionTimer" class="text-xl font-mono text-white">00:00</span>
                </div>
            </div>

            <!-- Panel de Inteligencia Artificial -->
            <div class="flex-1 flex flex-col justify-end gap-4">
                
                <!-- Visualizador de Audio -->
                <div class="bg-brand-dark rounded-xl p-4 border border-white/5 relative overflow-hidden">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-xs font-mono text-brand-accent flex items-center gap-2">
                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" /></svg>
                            AI COACHING INSTRUCTION
                        </span>
                        <div id="statusIndicator" class="text-[10px] bg-neutral-800 px-2 py-0.5 rounded text-neutral-400 uppercase">Standby</div>
                    </div>

                    <!-- Barras animadas -->
                    <div id="equalizer" class="flex items-end justify-between h-12 gap-1 px-2">
                        <!-- Generado por JS -->
                    </div>
                </div>

                <!-- Botón de Acción Principal -->
                <!-- shadow color actualizado a rojo -->
                <button id="toggleBtn" onclick="toggleSpeech()" class="group relative w-full h-16 bg-brand-accent hover:bg-red-600 transition-all duration-300 rounded overflow-hidden flex items-center justify-center shadow-[0_0_20px_rgba(255,42,42,0.3)]">
                    <!-- Fondo de textura -->
                    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMiIgY3k9IjIiIHI9IjEiIGZpbGw9IiMwMDAiIG9wYWNpdHk9IjAuMSIvPjwvc3ZnPg==')] opacity-20"></div>
                    
                    <div class="relative flex items-center gap-3 z-10">
                        <span id="btnIcon" class="bg-black text-brand-accent p-1.5 rounded-full transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                        </span>
                        <span id="btnText" class="text-white font-bold text-lg tracking-wider uppercase">INICIAR ANÁLISIS</span>
                    </div>
                </button>
            </div>
        </div>

        <!-- Footer Decorativo -->
        <div class="p-3 bg-brand-black border-t border-white/5 flex justify-center pb-6 sm:pb-3">
            <div class="h-1 w-1/3 bg-neutral-800 rounded-full"></div>
        </div>
    </div>

    <script>
        // --- LÓGICA DEL SISTEMA ---
        const techniqueText = "Atención, boxeador. Para ejecutar un Jab perfecto, sigue estos pasos: Primero, colócate en tu postura de combate con la guardia alta. Segundo, extiende tu brazo delantero de forma explosiva y en línea recta. Tercero, justo antes del impacto, gira el puño para que la palma mire hacia el suelo. Cuarto, exhala aire al golpear. Y quinto, recupera la mano inmediatamente hacia tu rostro para protegerte. Repite: Extiende, gira, impacta y cubre.";

        const btn = document.getElementById('toggleBtn');
        const btnText = document.getElementById('btnText');
        const btnIcon = document.getElementById('btnIcon');
        const statusIndicator = document.getElementById('statusIndicator');
        const equalizer = document.getElementById('equalizer');
        const timerDisplay = document.getElementById('sessionTimer');
        
        let synth = window.speechSynthesis;
        let utterance = null;
        let animationFrame;
        let sessionSeconds = 0;

        // 1. Inicializar Ecualizador Visual
        function initEqualizer() {
            equalizer.innerHTML = '';
            for(let i=0; i<20; i++) {
                const bar = document.createElement('div');
                bar.className = 'equalizer-bar w-1.5 bg-brand-accent rounded-t-sm';
                bar.style.height = '4px';
                bar.style.opacity = '0.3';
                equalizer.appendChild(bar);
            }
        }
        initEqualizer();

        // 2. Animar Ecualizador
        function animateEqualizer(isActive) {
            const bars = document.querySelectorAll('.equalizer-bar');
            
            if (!isActive) {
                bars.forEach(bar => {
                    bar.style.height = '4px';
                    bar.style.opacity = '0.3';
                });
                cancelAnimationFrame(animationFrame);
                return;
            }

            function loop() {
                bars.forEach(bar => {
                    const h = Math.random() * 40 + 5; 
                    bar.style.height = `${h}px`;
                    bar.style.opacity = '1';
                });
                setTimeout(() => {
                   animationFrame = requestAnimationFrame(loop);
                }, 100);
            }
            loop();
        }

        // 3. Temporizador de Sesión
        setInterval(() => {
            sessionSeconds++;
            const m = Math.floor(sessionSeconds / 60).toString().padStart(2, '0');
            const s = (sessionSeconds % 60).toString().padStart(2, '0');
            timerDisplay.innerText = `${m}:${s}`;
        }, 1000);

        // 4. Lógica de Voz
        function setupSpeech() {
            if (synth.speaking) synth.cancel();
            utterance = new SpeechSynthesisUtterance(techniqueText);
            utterance.lang = 'es-ES';
            
            utterance.onstart = () => updateUI(true);
            utterance.onend = () => updateUI(false);
            utterance.onerror = () => updateUI(false);
        }

        function toggleSpeech() {
            if (!utterance) setupSpeech();

            if (synth.speaking) {
                synth.cancel();
                updateUI(false);
            } else {
                const voices = synth.getVoices();
                const bestVoice = voices.find(v => v.name.includes('Google') && v.lang.includes('es')) || 
                                  voices.find(v => v.lang.includes('es'));
                
                if (bestVoice) utterance.voice = bestVoice;
                synth.speak(utterance);
            }
        }

        function updateUI(isActive) {
            if (isActive) {
                // Estado ACTIVO (Hablando) -> Botón Blanco para "Stop"
                btnText.innerText = "DETENER";
                btnText.classList.replace('text-white', 'text-black');
                
                btn.classList.replace('bg-brand-accent', 'bg-brand-active');
                btn.classList.remove('hover:bg-red-600'); // Quitar hover rojo
                
                // Icono invertido
                btnIcon.classList.replace('text-brand-accent', 'text-black');
                btnIcon.classList.replace('bg-black', 'bg-brand-accent'); // Icono fondo rojo

                statusIndicator.innerText = "ANALYZING...";
                statusIndicator.className = "text-[10px] bg-brand-accent text-white px-2 py-0.5 rounded font-bold animate-pulse shadow-[0_0_8px_rgba(255,42,42,0.6)]";
                animateEqualizer(true);
            } else {
                // Estado INACTIVO (Espera) -> Botón Rojo para "Start"
                btnText.innerText = "INICIAR ANÁLISIS";
                btnText.classList.replace('text-black', 'text-white');
                
                btn.classList.replace('bg-brand-active', 'bg-brand-accent');
                btn.classList.add('hover:bg-red-600');
                
                // Icono normal
                btnIcon.classList.replace('text-black', 'text-brand-accent');
                btnIcon.classList.replace('bg-brand-accent', 'bg-black');

                statusIndicator.innerText = "STANDBY";
                statusIndicator.className = "text-[10px] bg-neutral-800 px-2 py-0.5 rounded text-neutral-400 uppercase";
                animateEqualizer(false);
            }
        }

        window.speechSynthesis.onvoiceschanged = setupSpeech;
        setupSpeech();

    </script>
</body>
</html>
