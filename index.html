<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divélun Pro - Boxing Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Chakra+Petch:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-dark': '#050505',
                        'brand-panel': '#121212',
                        'brand-red': '#ff1f1f', /* Rojo Láser */
                        'brand-gray': '#2a2a2a',
                    },
                    fontFamily: {
                        sans: ['Oswald', 'sans-serif'],
                        tech: ['Chakra Petch', 'monospace'], // Fuente técnica para números
                    },
                    backgroundImage: {
                        'grid-pattern': "url('data:image/svg+xml,%3Csvg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cg fill=\"%23222\" fill-opacity=\"0.4\" fill-rule=\"evenodd\"%3E%3Cpath d=\"M0 40L40 0H20L0 20M40 40V20L20 40\"/%3E%3C/g%3E%3C/svg%3E')",
                    }
                }
            }
        }
    </script>
    
    <style>
        body { background-color: #050505; color: white; }
        
        /* Ocultar scrollbar */
        ::-webkit-scrollbar { width: 0px; background: transparent; }

        /* Efecto Glitch sutil para botón activo */
        .btn-active {
            box-shadow: 0 0 15px rgba(255, 31, 31, 0.5);
            border-color: #ff1f1f;
        }

        /* Gradiente ambiental */
        .ambient-light {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,31,31,0.1) 0%, rgba(0,0,0,0) 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
        }
    </style>
</head>
<body class="bg-brand-dark min-h-screen flex flex-col items-center justify-start sm:justify-center p-0 font-sans relative">

    <!-- Fondo con patrón y luz -->
    <div class="absolute inset-0 bg-grid-pattern opacity-20 pointer-events-none"></div>
    <div class="ambient-light top-[-100px] left-[-100px]"></div>
    
    <!-- Contenedor Principal -->
    <div class="w-full max-w-md bg-brand-panel min-h-screen sm:min-h-0 sm:h-auto sm:rounded-[32px] border border-white/5 shadow-2xl flex flex-col relative overflow-hidden z-10 backdrop-blur-sm">

        <!-- 1. HEADER (Más compacto) -->
        <div class="px-5 py-3 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent z-20 absolute top-0 w-full">
            <div class="flex items-center gap-3">
                <div class="flex flex-col">
                    <h1 class="text-lg font-bold italic tracking-wide leading-none">DIVÉLUN <span class="text-brand-red">AI</span></h1>
                    <span class="text-[8px] text-gray-400 tracking-[0.2em] uppercase">Boxing Analytics</span>
                </div>
            </div>
            <!-- Badge de Nivel -->
            <div class="flex items-center gap-2 bg-white/5 backdrop-blur px-2 py-0.5 rounded-full border border-white/10">
                <div class="w-1 h-1 rounded-full bg-green-500"></div>
                <span class="text-[9px] text-gray-300 font-bold uppercase tracking-wider">Nivel Básico</span>
            </div>
        </div>

        <!-- 2. VIDEO PLAYER (Hero Section) -->
        <div class="relative w-full aspect-video bg-black shadow-2xl z-10 group">
            <video id="exerciseVideo" 
                   class="w-full h-full object-contain opacity-90 transition-opacity duration-500" 
                   autoplay muted playsinline loop>
                <source src="v-x9z2-sh01-div.mp4" type="video/mp4">
                <source src="https://assets.mixkit.co/videos/preview/mixkit-boxing-training-in-a-gym-4833-large.mp4" type="video/mp4">
            </video>
            
            <!-- Overlay Gradiente -->
            <div class="absolute inset-0 bg-gradient-to-t from-brand-panel via-transparent to-black/40 pointer-events-none"></div>

            <!-- Título Flotante (Reducido significativamente) -->
            <div class="absolute bottom-3 left-4 z-20">
                <h2 class="text-xl font-bold italic text-white drop-shadow-lg leading-none">JAB <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-red to-orange-600">MASTER</span></h2>
                <p class="text-[9px] text-gray-400 font-tech mt-0.5 uppercase tracking-wider">Drill #01 • Fundamentals</p>
            </div>
        </div>

        <!-- 3. DASHBOARD DE CONTROL -->
        <div class="flex-1 px-5 pb-6 pt-3 flex flex-col gap-4 relative z-20 -mt-3 bg-brand-panel rounded-t-2xl border-t border-white/5">
            
            <!-- Decorador Central -->
            <div class="w-10 h-1 bg-gray-800 rounded-full mx-auto mb-1 opacity-50"></div>

            <!-- NUEVO: Botón de Instrucciones (Reubicado para ser intuitivo) -->
            <button onclick="playInstructionsOnly()" class="w-full py-3 bg-gray-800/40 hover:bg-gray-800 border border-white/10 rounded-lg flex items-center justify-center gap-3 transition-all group active:scale-[0.98]">
                <div class="p-1.5 rounded-full bg-brand-red/10 text-brand-red group-hover:bg-brand-red group-hover:text-white transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>
                </div>
                <span class="text-[10px] font-bold text-gray-300 group-hover:text-white tracking-[0.15em] uppercase">Escuchar Instrucciones de Técnica</span>
            </button>

            <!-- Grid de Métricas -->
            <div class="grid grid-cols-2 gap-3">
                
                <!-- Tarjeta Cronómetro (Hero) -->
                <div class="col-span-2 bg-gradient-to-br from-brand-gray/50 to-brand-panel border border-white/5 rounded-xl p-4 flex flex-col items-center relative shadow-lg">
                    <span class="text-[9px] text-gray-500 uppercase tracking-[0.2em] mb-1">Tiempo Restante</span>
                    
                    <div class="flex items-center gap-4 w-full justify-center">
                        <!-- Botón Restar -->
                        <button onclick="adjustTime(-10)" class="w-8 h-8 rounded-full bg-black/40 border border-white/10 flex items-center justify-center hover:border-brand-red/50 hover:text-brand-red transition-all active:scale-95 group">
                            <span class="text-[9px] font-tech font-bold">-10</span>
                        </button>

                        <!-- Display Tiempo (Reducido de 6xl a 5xl) -->
                        <div class="text-5xl font-tech font-bold text-white tracking-tighter tabular-nums drop-shadow-[0_0_10px_rgba(255,255,255,0.1)]" id="timerDisplay">01:00</div>

                        <!-- Botón Sumar -->
                        <button onclick="adjustTime(30)" class="w-8 h-8 rounded-full bg-brand-red/10 border border-brand-red/30 flex items-center justify-center hover:bg-brand-red hover:text-white transition-all active:scale-95 text-brand-red group">
                            <span class="text-[9px] font-tech font-bold">+30</span>
                        </button>
                    </div>

                    <!-- Estado Texto -->
                    <p id="statusText" class="mt-1 text-[9px] font-mono uppercase tracking-widest text-gray-500">Listo</p>
                </div>

                <!-- Tarjeta Calorías (Compacta) -->
                <div class="bg-black/30 border border-white/5 rounded-lg p-3 flex flex-col items-center justify-center">
                    <span class="text-[8px] text-gray-500 uppercase tracking-widest mb-0.5">Quema Est.</span>
                    <div class="flex items-baseline gap-1">
                        <span class="text-xl font-tech font-bold text-brand-red">45</span>
                        <span class="text-[9px] text-gray-400 font-bold">KCAL</span>
                    </div>
                </div>

                <!-- Tarjeta Info Adicional (Compacta) -->
                <div class="bg-black/30 border border-white/5 rounded-lg p-3 flex flex-col items-center justify-center">
                    <span class="text-[8px] text-gray-500 uppercase tracking-widest mb-0.5">Intensidad</span>
                    <div class="flex items-center gap-1">
                        <div class="w-1.5 h-3 bg-brand-red rounded-sm skew-x-[-10deg]"></div>
                        <div class="w-1.5 h-3 bg-brand-red rounded-sm skew-x-[-10deg]"></div>
                        <div class="w-1.5 h-3 bg-gray-700 rounded-sm skew-x-[-10deg]"></div>
                        <span class="text-[10px] text-white ml-1 font-bold">ALTA</span>
                    </div>
                </div>
            </div>

            <!-- BOTÓN DE ACCIÓN PRINCIPAL -->
            <div class="mt-1">
                <button id="mainBtn" onclick="toggleTimer()" class="w-full py-4 bg-brand-red hover:bg-red-600 active:scale-[0.98] transition-all duration-200 rounded-lg shadow-[0_0_20px_rgba(255,31,31,0.3)] flex items-center justify-center gap-2 group relative overflow-hidden border border-red-500/50">
                    
                    <!-- Efecto brillo hover -->
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out"></div>
                    
                    <span id="btnIcon">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </span>
                    <span id="btnText" class="text-white font-bold text-base tracking-[0.15em] uppercase italic">INICIAR ASALTO</span>
                </button>
            </div>

            <!-- Navegación Inferior -->
            <div class="mt-auto pt-2 flex gap-3">
                <button class="flex-1 py-2.5 rounded-lg border border-white/10 text-gray-400 hover:text-white hover:bg-white/5 text-[9px] uppercase tracking-widest font-bold transition-colors flex items-center justify-center gap-2">
                    <svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                    Anterior
                </button>
                <button class="flex-1 py-2.5 rounded-lg bg-gray-800 hover:bg-gray-700 text-white text-[9px] uppercase tracking-widest font-bold transition-colors flex items-center justify-center gap-2">
                    Siguiente
                    <svg class="w-2.5 h-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURACIÓN ---
        const DRILL_TIME = 60; // 60 segundos
        
        const coachScript = "¡Guardia arriba! Vamos a pulir ese Jab. Pies firmes. Dispara ese brazo delantero recto como una flecha. Gira el puño al final para cortar. Exhala fuerte al golpear. ¡Shhh! Y regresa la mano rápido a la cara. ¡Vamos, con fuerza!";
        const finishScript = "¡Terminó el tiempo! ¿Quieren agregar más tiempo o continuar a la siguiente lección?";

        // DOM Elements
        const timerDisplay = document.getElementById('timerDisplay');
        const mainBtn = document.getElementById('mainBtn');
        const btnText = document.getElementById('btnText');
        const btnIcon = document.getElementById('btnIcon');
        const statusText = document.getElementById('statusText');
        const video = document.getElementById('exerciseVideo');

        // Estado
        let timeLeft = DRILL_TIME;
        let isRunning = false;
        let isFinished = false; 
        let timerInterval;
        let synth = window.speechSynthesis;
        let utterance = null;

        // Iconos SVG
        const iconPlay = '<svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
        const iconPause = '<svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';
        const iconReset = '<svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>';

        // Asegurar autoplay
        window.onload = function() {
            video.play().catch(e => console.log("Autoplay handled by browser/user interaction"));
        };

        // 1. INSTRUCCIONES
        function playInstructionsOnly() {
            if (synth.speaking) {
                synth.cancel();
            } else {
                speak(coachScript);
            }
        }

        // 2. AJUSTAR TIEMPO
        function adjustTime(seconds) {
            timeLeft += seconds;
            if (timeLeft < 0) timeLeft = 0;
            
            updateTimerUI();

            if (isFinished && timeLeft > 0) {
                isFinished = false;
                btnText.innerText = "REANUDAR";
                btnIcon.innerHTML = iconPlay;
                statusText.innerText = "Tiempo añadido";
                statusText.className = "mt-1 text-[9px] font-mono uppercase tracking-widest text-gray-500";
                
                mainBtn.className = "w-full py-4 bg-brand-red hover:bg-red-600 active:scale-[0.98] transition-all duration-200 rounded-lg shadow-[0_0_20px_rgba(255,31,31,0.3)] flex items-center justify-center gap-2 group relative overflow-hidden border border-red-500/50";
            }
        }

        // 3. CONTROL DEL CRONÓMETRO
        function toggleTimer() {
            if (timeLeft <= 0 && isFinished) {
                resetTimer();
                return;
            }

            if (isRunning) {
                pauseTimer();
            } else {
                if (timeLeft > 0) {
                    startTimer();
                } else {
                    resetTimer();
                }
            }
        }

        function startTimer() {
            isRunning = true;
            isFinished = false;
            
            // UI Update
            btnText.innerText = "PAUSAR";
            btnIcon.innerHTML = iconPause;
            statusText.innerText = "Cronómetro corriendo";
            statusText.className = "mt-1 text-[9px] font-mono uppercase tracking-widest text-brand-red animate-pulse";
            
            // Botón Estilo Activo (Dark)
            mainBtn.className = "w-full py-4 bg-gray-900 border border-gray-700 hover:bg-gray-800 active:scale-[0.98] transition-all duration-200 rounded-lg flex items-center justify-center gap-2 group relative overflow-hidden";

            timerInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateTimerUI();
                } else {
                    finishTimer();
                }
            }, 1000);
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);

            // UI Update
            btnText.innerText = "REANUDAR";
            btnIcon.innerHTML = iconPlay;
            statusText.innerText = "Pausado";
            statusText.className = "mt-1 text-[9px] font-mono uppercase tracking-widest text-gray-500";
            
            mainBtn.className = "w-full py-4 bg-brand-red hover:bg-red-600 active:scale-[0.98] transition-all duration-200 rounded-lg shadow-[0_0_20px_rgba(255,31,31,0.3)] flex items-center justify-center gap-2 group relative overflow-hidden border border-red-500/50";
        }

        function finishTimer() {
            pauseTimer(); 
            timeLeft = 0;
            isFinished = true;
            updateTimerUI();
            
            // UI Final
            btnText.innerText = "REINICIAR";
            btnIcon.innerHTML = iconReset;
            statusText.innerText = "¡Entrenamiento Completado!";
            statusText.className = "mt-1 text-[9px] font-bold uppercase tracking-widest text-green-500";
            
            // Botón Verde
            mainBtn.className = "w-full py-4 bg-green-600 hover:bg-green-700 active:scale-[0.98] transition-all duration-200 rounded-lg shadow-[0_0_20px_rgba(34,197,94,0.3)] flex items-center justify-center gap-2 group relative overflow-hidden border border-green-500/50";

            speak(finishScript);
        }

        function resetTimer() {
            timeLeft = DRILL_TIME;
            isFinished = false;
            updateTimerUI();
            
            mainBtn.className = "w-full py-4 bg-brand-red hover:bg-red-600 active:scale-[0.98] transition-all duration-200 rounded-lg shadow-[0_0_20px_rgba(255,31,31,0.3)] flex items-center justify-center gap-2 group relative overflow-hidden border border-red-500/50";
            btnText.innerText = "INICIAR ASALTO";
            btnIcon.innerHTML = iconPlay;

            statusText.innerText = "Listo para comenzar";
            statusText.className = "mt-1 text-[9px] font-mono uppercase tracking-widest text-gray-500";
            
            startTimer();
        }

        // 4. ACTUALIZAR UI
        function updateTimerUI() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            const s = (timeLeft % 60).toString().padStart(2, '0');
            timerDisplay.innerText = `${m}:${s}`;
            
            if (timeLeft < 10 && timeLeft > 0) {
                timerDisplay.classList.add('text-brand-red');
            } else {
                timerDisplay.classList.remove('text-brand-red');
            }
        }

        // 5. MOTOR DE VOZ
        function speak(text) {
            if (synth.speaking) synth.cancel();
            utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'es-MX';
            utterance.rate = 1.1;
            
            const voices = synth.getVoices();
            const googleVoice = voices.find(v => v.name.includes('Google') && v.lang.includes('es'));
            if (googleVoice) utterance.voice = googleVoice;

            synth.speak(utterance);
        }

        window.speechSynthesis.onvoiceschanged = () => {};

    </script>
</body>
</html>
